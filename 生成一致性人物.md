# ç”Ÿæˆä¸€è‡´æ€§äººè„¸æ–¹æ³•

[TOC]

## æ–¹æ³•ä¸€ï¼šè®¾å®šåå­—

### 1.1 ä½¿ç”¨å¤šä¸ªåäººåå­—

ä½¿ç”¨åäººçš„åå­—æ˜¯ç”Ÿæˆä¸€è‡´é¢å­”çš„å¯é æ–¹æ³•ã€‚è®©æˆ‘ä»¬ç ”ç©¶ä¸€ä¸‹ä¸‹é¢çš„åŸºæœ¬æç¤ºï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªé€šç”¨é¢ã€‚

Base prompt:

> photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores

We will use the same negative prompt for the rest of this article.

> disfigured, ugly, bad, immature, cartoon, anime, 3d, painting, b&w

<img src="./images/image-20230911103939195.png" alt="image-20230911103939195" style="zoom:50%;" />

<span style="color:red;">å…¶å®å¥¹ä»¬çœ‹èµ·æ¥ä¹Ÿåƒæ˜¯ä¸€ä¸ªäººï¼Œä½¿ç”¨çš„æ˜¯ eplicrealism æ¨¡å‹ï¼Œè¯´æ˜è¯¥æ¨¡å‹æœ¬èº«åº•æ¨¡å¤šæ ·æ€§ä¸è¶³</span>

ä»–ä»¬æ˜¯å¾ˆå¥½çš„é¢å­”ï¼Œä½†ä»–ä»¬é•¿å¾—ä¸åŒã€‚æœ‰æ—¶ï¼Œä½ å¸Œæœ›åœ¨å¤šä¸ªå›¾åƒä¸­ç”ŸæˆåŒä¸€å¼ è„¸ã€‚

åäººçš„åå­—ä¼šæœ‰ä¸€ä¸ªå¼ºå¤§çš„å½±å“ã€‚ä½¿ç”¨å®ƒä»¬æ˜¯ç”Ÿæˆä¸€è‡´äººè„¸çš„ä¸€ç§è¡Œä¹‹æœ‰æ•ˆçš„æ–¹æ³•ã€‚

è®©æˆ‘ä»¬åœ¨â€œç¨³å®šæ‰©æ•£â€ä¸­ä¸ºæç¤ºæ·»åŠ ä¸€ä¸ªå¼ºåç§°â€”â€”Emma Wastonã€‚

> Emma Watson, photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores

<img src="./images/image-20230911104449696.png" alt="image-20230911104449696" style="zoom:50%;" />

ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸æƒ³è¦ä»»ä½•å¯è¯†åˆ«äººè„¸çš„å›¾åƒå‘¢ï¼Ÿä½ åªéœ€è¦åœ¨å¤šä¸ªå›¾åƒä¸­æ˜¾ç¤ºä¸€å¼ æ™®é€šçš„è„¸ã€‚è¿™æ˜¯æœ‰æŠ€å·§çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨**å¤šä¸ªåäººåå­—**å°†ä»–ä»¬çš„è„¸èåˆæˆä¸€å¼ ç»Ÿä¸€çš„è„¸ã€‚

è®©æˆ‘ä»¬ç”¨è¿™ä¸‰ä¸ªåå­—ï¼š**Emma Watson, Tara Reid, and Ana de Armas**ã€‚â€œç¨³å®šæ‰©æ•£â€å°†è·å–æ‰€æœ‰ 3 ä¸ªäººè„¸ï¼Œå¹¶å°†å®ƒä»¬æ··åˆåœ¨ä¸€èµ·ä»¥å½¢æˆä¸€ä¸ªæ–°é¢ã€‚

> Emma Watson, Tara Reid, Ana de Armas, photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores

<img src="./images/image-20230911104845316.png" alt="image-20230911104845316" style="zoom:50%;" />

è¿™å¾ˆå¥½ã€‚è¿™äº›å›¾åƒä¸­çš„äººè„¸æ˜¯ä¸€è‡´çš„ã€‚ä½†ä¸ºä»€ä¹ˆä»–ä»¬çœ‹èµ·æ¥å¦‚æ­¤åƒâ€¦â€¦Emmaï¼ŸåŸå› æ˜¯ Emma Watson æ˜¯ Stable Diffusion ä¸­ä¸€ä¸ªéå¸¸å¼ºçš„å…³é”®è¯ã€‚ä½ å¿…é¡»ç”¨å…³é”®è¯æƒé‡ (keyword: weight) è¯­æ³•åŠ ä»¥æ§åˆ¶ã€‚

> (Emma Watson:0.5), (Tara Reid:0.9), (Ana de Armas:1.2), photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores

<img src="./images/image-20230911105255973.png" alt="image-20230911105255973" style="zoom:50%;" />

ä½¿ç”¨å¤šä¸ªåäººåå­—å’Œå…³é”®è¯æƒé‡æ¥ä»”ç»†è°ƒæ•´ä½ æƒ³è¦çš„é¢éƒ¨ç‰¹å¾ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨åå‘æç¤ºä¸­ä½¿ç”¨åäººçš„åå­—æ¥é¿å…ä½ ä¸æƒ³è¦çš„é¢éƒ¨ç‰¹å¾ã€‚

### 1.2 ä½¿ç”¨è™šæ„äººç‰©åç§°

> **[Wighteyeguy](https://www.youtube.com/@thewighteyeguy)** çš„è¯„è®ºï¼šhttps://stable-diffusion-art.com/consistent-face/

å¯¹äº prompt æ–¹æ³•ï¼Œä½¿ç”¨å®Œå…¨è™šæ„çš„åç§°å¹¶ç”Ÿæˆä¸€è‡´çš„é¢ã€‚è¿™æœ‰ç‚¹å¶ç„¶ï¼Œä½†å®ƒå¾ˆç®¡ç”¨ï¼åŒæ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°å­—â€¦ã€‚å› æ­¤ï¼Œä½ å¯ä»¥å°†â€œç§å­â€å’Œå‚æ•°å€¼æ”¾åœ¨æ‹¬å·ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ··åˆæ–¹æ³•æ··åˆä¸¤ä¸ªç§å­ä»¥è·å¾—ä¸€è‡´çš„äººè„¸ã€‚åŒæ ·ï¼Œåœ¨ä½ æ‰¾åˆ°ä¸€ä¸ªä½ å–œæ¬¢çš„ç»„åˆä¹‹å‰ï¼Œæœ‰äº›å¶ç„¶â€”â€”ä½†ä¸¤è€…çš„ä¼˜ç‚¹æ˜¯ï¼Œå®ƒä»¬ä¸å¿…çœ‹èµ·æ¥åƒæŸä¸ªçŸ¥åçš„åäººã€‚å¾ˆæ˜æ˜¾ï¼Œä½ å¯ä»¥è¿›ä¸€æ­¥æŒ‡å¯¼å¹´é¾„å’Œé•¿ç›¸ï¼Œä½†æˆ‘å‘ç°å®ƒçš„æ•ˆæœå§‹ç»ˆå¦‚ä¸€ï¼Œéå¸¸æœ‰ç”¨ï¼

å› æ­¤ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä½¿ç”¨è¿™æ ·çš„æç¤ºï¼šâ€œ40 year old woman, [99576:12345:0.5]â€ï¼Œå¹¶ç›¸å½“ä¸€è‡´åœ°å¾—åˆ°åŒæ ·æ¼‚äº®çš„æ·±è‰²å¤´å‘ã€‚å¦‚æœæˆ‘ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªè™šæ„çš„åå­—ï¼Œæˆ‘ä¼šç»å¸¸ä½¿ç”¨ä¸­é—´åæ¥ä½¿å®ƒæ›´åŠ ç‹¬ç‰¹ã€‚ä¾‹å¦‚ï¼Œâ€œ40 year old woman, (Michelle Alice Bullock:1.3)â€ å‡ ä¹æ¯æ¬¡éƒ½ç»™æˆ‘åŒæ ·çš„é»‘çš®è‚¤å¥³äººã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ Adeteller æç¤ºä¸­è¾“å…¥ç›¸åŒçš„å…¬å¼ã€‚

<span style="color:red;">å®æµ‹æ•ˆæœä¸€èˆ¬ï¼Œæœ‰å‡ åˆ†ç›¸ä¼¼ï¼Œä½†ä¸å¦‚å‰å‡ ç§æ–¹æ³•æ•ˆæœå¥½</span>

> ä½¿ç”¨æŠ€å·§ï¼š
>
> éšæœºåå­—ç”Ÿæˆå™¨ https://www.behindthename.com/random/
>
> prompt ä¸­å¯ä»¥åŠ å…¥ï¼Œâ€œa photo of [generated name]â€ ï¼Œæ›¿æ¢ä¸ºè‡ªå·±é€‰æ‹©çš„ä»»åŠ¡å§“åï¼Œå¹¶å¯åŠ å…¥è¯¸å¦‚â€œ35 years oldâ€ ç­‰å¹´é¾„ä»¥åŠå›½ç±æˆ–åœ°ç†åŒºåŸŸç­‰ä¿¡æ¯ï¼Œè¿™å¾ˆé‡è¦ï¼

## æ–¹æ³•äºŒï¼šæ’ä»¶

### 2.1 Roop æ’ä»¶

Roop æ‰©å±•å¯ä»¥å°†å‚è€ƒç…§ç‰‡ä¸­çš„äººè„¸å¤åˆ¶åˆ°ä½¿ç”¨â€œç¨³å®šæ‰©æ•£â€ç”Ÿæˆçš„å›¾åƒä¸­ã€‚å•ç‹¬çš„ roop ç¨‹åºå¯ä»¥ä¸ºè§†é¢‘åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†è¯¥æ‰©å±•ä»…æ”¯æŒå˜æ¢å›¾åƒã€‚

> photo of young woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores

> disfigured, ugly, bad, immature, cartoon, anime, 3d, painting, b&w

Model: Realistic Vision 5.1

* Reference image:

![img](./images/Emma.jpeg)

* Restore face: None
* Upscaler: None
* å¯ç”¨ Enable

<table>
  <tr>
    <td>
      <img src="./images/image-20230911160254869.png" alt="å›¾ç‰‡1">
      <p>ä¸Šè¿° Prompt å‡ºå›¾</p>
    </td>
    <td>
      <img src="./images/image-20230911160335171.png" alt="å›¾ç‰‡2">
      <p>ç›¸åŒseedä¸‹roopæ¢è„¸</p>
    </td>
  </tr>
</table>
<span style="color:red;">å¯ä»¥æˆåŠŸæ¢è„¸ï¼Œä½†æ˜¯é¢éƒ¨æ¸…æ™°åº¦è¾ƒä½</span>

#### é”åŒ–é¢éƒ¨

ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œè¿™äº›è„¸åœ¨å˜äº†çš„æ—¶å€™æœ‰ç‚¹æ¨¡ç³Šã€‚æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥äº§ç”Ÿæ›´æ¸…æ™°çš„å›¾åƒã€‚

1. ä½¿ç”¨é«˜åˆ†è¾¨ç‡å‚è€ƒå›¾åƒã€‚
2. ä½¿ç”¨é¢éƒ¨ä¿®å¤ã€‚
3. æ¥ä¸€è½® img2imgã€‚
4. ä½¿ç”¨ dreambooth åˆ›å»ºæ–°çš„æ¨¡å‹ (ä¸‹ä¸€èŠ‚)

##### ä½¿ç”¨é¢éƒ¨ä¿®å¤åŠŸèƒ½

- **Restore face**: CodeFormer
- **Restore visibility**: 0.5

é¢éƒ¨ä¿®å¤å¯ä»¥æ”¹å˜é¢éƒ¨çš„é£æ ¼ï¼Œä½¿å…¶çœ‹èµ·æ¥åƒäººé€ çš„ã€‚ä½ å¯ä»¥åº”ç”¨æœ€ä½çš„**æ¢å¤å¯è§æ€§ï¼ˆrestore visibilityï¼‰**ã€‚

<table>
  <tr>
    <td>
      <img src="./images/image-20230911161647674.png" alt="å›¾ç‰‡1">
      <p>åŸå›¾</p>
    </td>
    <td>
      <img src="./images/image-20230911161731942.png" alt="å›¾ç‰‡2">
      <p>ä¸åŠ  codeformer</p>
    </td>
    <td>
      <img src="./images/image-20230911161821032.png" alt="å›¾ç‰‡1">
      <p>codeformer, Restore visibility = 0.5</p>
    </td>
    <td>
      <img src="./images/image-20230911161958818.png" alt="å›¾ç‰‡2">
      <p>codeformer, Restore visibility = 0</p>
    </td>
  </tr>
</table>
èƒ½å¥½ä¸€äº›ï¼Œä½†æ˜¯å’ŒåŸå›¾ç›¸æ¯”ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ¨¡ç³Šã€‚

##### æ¥ä¸€è½® img2img

å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ img2imgã€‚ä½¿ç”¨ Roop ç”Ÿæˆäººè„¸äº¤æ¢å›¾åƒåï¼Œä½¿ç”¨å›¾åƒç”»å¸ƒä¸‹çš„**å‘é€åˆ° img2img **æŒ‰é’®å°†ç”Ÿæˆçš„å›¾åƒå‘é€åˆ° img2imgã€‚

ç„¶åè®¾ç½®å»å™ªå¼ºåº¦ **denoising strength** to 0.1ï¼Œå…¶ä»–è®¾ç½®ä¿æŒä¸å˜ï¼š

<table>
  <tr>
    <td>
      <img src="./images/image-20230911163359647.png" alt="å›¾ç‰‡1">
      <p>æ¢è„¸åæœªåŠ  CodeFormer</p>
    </td>
    <td>
      <img src="./images/image-20230911163500966.png" alt="å›¾ç‰‡2">
      <p>æ¥ä¸€è½® img2img</p>
    </td>
  </tr>
</table>
### 2.2 FaceSwapLab æ’ä»¶

æœ¬ä»¥ä¸ºæ˜¯ä¸ªä¸é”™çš„æ’ä»¶ï¼Œçœ‹äº†[å®˜æ–¹](https://github.com/glucauze/sd-webui-faceswaplab) readme ä¸­æœ‰å…³â€œçˆ±å› æ–¯å¦â€äººè„¸çš„æ¼”ç¤ºè§†é¢‘ï¼Œä¸€è¨€éš¾å°½ï¼Œä¸èƒ½è¯´ä¸åƒï¼Œæ„Ÿè§‰åªæœ‰ 30% å·¦å³çš„ç›¸åƒã€‚

## æ–¹æ³•ä¸‰ï¼šæ¨¡å‹è®­ç»ƒ

### 3.1 Dreambooth è®­ç»ƒ

ä¹Ÿè®¸ç”ŸæˆåŒä¸€å¼ è„¸æœ€å¯é çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Dreambooth åˆ›å»ºè‡ªå·±çš„ç¨³å®šæ‰©æ•£æ¨¡å‹ã€‚

Dreambooth æ˜¯ä¸€ç§ä½¿ç”¨è‡ªå·±çš„ä¸»é¢˜æˆ–é£æ ¼åˆ›å»º**æ–°çš„ç¨³å®šæ‰©æ•£æ£€æŸ¥ç‚¹æ¨¡å‹**çš„æŠ€æœ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‹æ‘„å¯¹è±¡å°†æ˜¯æ‹¥æœ‰ä½ æƒ³è¦çš„é¢å­”çš„äººã€‚

ä½ éœ€è¦å…³äºæŸä¸ªäººçš„å‡ å¼ å›¾ç‰‡ã€‚

æ”¶é›†è®­ç»ƒå›¾åƒå¯èƒ½æ˜¯ä¸€é¡¹æŒ‘æˆ˜ã€‚è¿™é‡Œæœ‰å‡ ä¸ªé€‰é¡¹ï¼š

1. è¯·æ±‚ä½ è®¤è¯†çš„äººå…è®¸ä½¿ç”¨ä»–/å¥¹çš„ç…§ç‰‡ã€‚
2. è‡ªæ‹
3. ä½¿ç”¨ä¸Šé¢çš„**å¤šä¸ªåäººå§“å**æ–¹æ³•ç”Ÿæˆè®­ç»ƒå›¾åƒã€‚
4. ä½¿ç”¨ä¸Šé¢çš„ **Roop æ–¹æ³•**ç”Ÿæˆè®­ç»ƒå›¾åƒã€‚

#### æ­¥éª¤ä¸€ï¼šç”¨ Roop ç”Ÿæˆè®­ç»ƒæ•°æ®

ä½¿ç”¨ Roop ç”Ÿæˆå…·æœ‰ç›¸åŒé¢éƒ¨çš„ 8 åˆ° 15 ä¸ªå›¾åƒã€‚ä»¥ä¸‹æ˜¯è®­ç»ƒå›¾åƒçš„ä¸¤ä¸ªç¤ºä¾‹ã€‚ä½¿ç”¨æ¨¡ç³Šçš„å›¾åƒæ˜¯æ¯”è¾ƒå¥½çš„ã€‚

#### æ­¥éª¤äºŒï¼šç”¨ Dreambooth ç”Ÿæˆæ–°çš„ checkpoint

ç”±äºæˆ‘ä»¬å¸Œæœ›è®­ç»ƒå…·æœ‰é€¼çœŸé£æ ¼çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Realistic Vision ç³»åˆ—æ¨¡å‹ï¼Œæ¯”å¦‚ [Realistic Vision v2](https://huggingface.co/SG161222/Realistic_Vision_V2.0)ã€‚

ä½ çš„æ–°å¥³å­©å°†è¢«ç§°ä¸º `zwx`ï¼Œè¿™æ˜¯ç¨³å®šæ‰©æ•£ä¸­ä¸€ç§ä¸å¸¸ç”¨ä½†å­˜åœ¨çš„ tokenã€‚ç”±äº `zwx` æ˜¯å¥³æ€§ï¼Œ**å®ä¾‹æç¤º**ä¸ºï¼š

> photo of zwx woman

**class** æ˜¯ `zwx` æ‰€å±çš„ç±»åˆ«ï¼Œå³ **women**ã€‚æ‰€ä»¥**ç±»æç¤º**æ˜¯

> photo of woman

é€šè¿‡æ­£ç¡®å®šä¹‰ç±»æç¤ºï¼Œä½ å¯ä»¥åˆ©ç”¨æ¨¡å‹ä¸­å¥³æ€§çš„æ‰€æœ‰å…ˆå‰å±æ€§ï¼Œå¹¶å°†å…¶åº”ç”¨äºåˆ°ä½ çš„çš„å¥³å­©ã€‚

ï¼ˆå…·ä½“è®­ç»ƒè¿‡ç¨‹ï¼Œç•¥ï¼‰

#### æ­¥éª¤ä¸‰ï¼šæ¨¡å‹ä½¿ç”¨

ç°åœ¨ï¼Œåœ¨æç¤ºä¸‹è¾“å…¥ä½ å¥³å­©çš„åå­— `zwx` è¿›è¡Œæµ‹è¯•ï¼š

> photo of young **zwx** woman, highlight hair, sitting outside restaurant, wearing dress, rim lighting, studio lighting, looking at the camera, dslr, ultra quality, sharp focus, tack sharp, dof, film grain, Fujifilm XT3, crystal clear, 8K UHD, highly detailed glossy eyes, high detailed skin, skin pores

ä¹Ÿå¯ä»¥ç”Ÿæˆè¿™ä¸ªäººçš„ä¸åŒé£æ ¼ï¼š

> oil painting of zwx young woman, highlight hair

> disfigured, ugly, bad, immature, b&w, frame

### 3.2 Lora è®­ç»ƒ

Lora ç›¸å¯¹ Dreambooth æ˜¯ä¸€ç§è½»é‡çº§çš„è®­ç»ƒæ–¹æ³•ã€‚æœ€å¥½æ˜¯èƒ½æ”¶é›†å…³äºæŸä¸ªäººçš„ä¸€ç»„ä¸åŒé£æ ¼çš„ç…§ç‰‡ï¼ˆäº‹å®ä¸Šè¿™å¯èƒ½å¹¶ä¸å®¹æ˜“ï¼‰è¿›è¡Œ Lora è®­ç»ƒã€‚å…·ä½“è®­ç»ƒæ–¹æ³•ï¼Œè¿™é‡Œå‚è€ƒçš„æ˜¯ï¼š

* [Creating a LoRA weight using kohya_ss GUI, part 1: Dataset creation and preparation](https://www.youtube.com/watch?v=N4_-fB62Hwk)
* [Creating a LoRA weight using kohya_ss GUI, part 2: Training the model and creating outputs](https://www.youtube.com/watch?v=k5imq01uvUY)

åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œä¸»è¦ä»‹ç»çš„æ˜¯å¦‚ä½•æœé›†å‡†å¤‡å›¾ç‰‡æ•°æ®ï¼Œæ¯”è¾ƒé‡è¦çš„å‡ ä¸ªç‚¹æ˜¯ï¼š

* ç”¨ kohya_ss å·¥å…·è®­ç»ƒæ˜¯ä¸€äº›æ–‡ä»¶çš„ç›®å½•ç»„ç»‡ç»“æ„ä»¥åŠå‘½åè§„åˆ™ç­‰
* å›¾ç‰‡çš„å‡†å¤‡è¦å°½å¯èƒ½é«˜æ¸…åŒ–ï¼ˆå¯é€šè¿‡ä¸€äº›é«˜æ¸…åŒ–ç®—æ³•æˆ–å·¥å…·å®ç°ï¼‰ï¼Œå¹¶å¯ä»¥æ ¹æ®éœ€è¦è£å‰ªæ‰æ— å…³éƒ¨åˆ†
* å…³äºäººç‰©å°½å¯èƒ½æ¶µç›–ä¸åŒçš„è§’åº¦ã€èƒŒæ™¯ã€é£æ ¼ç­‰
* æå–å›¾ç‰‡å­—å¹•å¹¶äººå·¥ä¿®æ”¹è°ƒæ•´ï¼Œä½¿å…¶å°½å¯èƒ½å‡†ç¡®

åœ¨ç¬¬äºŒéƒ¨åˆ†ä¸­ï¼Œä¸»è¦ä»‹ç»äº† kohya_ss å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ä»¥åŠä¸€äº›å‚æ•°çš„å«ä¹‰ï¼Œå¹¶æ¼”ç¤ºè®­ç»ƒä»¥åŠä½¿ç”¨æ¨ç†çš„è¿‡ç¨‹ç­‰



## æ–¹æ³•å››ï¼šControlNet å‚è€ƒå›¾

> video:[The Truth About Consistent Characters In Stable Diffusion](https://www.youtube.com/watch?v=WQsUeyzq-VA)
>
> key idea of the video:
>
> - ğŸ“ 00:00 åœ¨ç¨³å®šæ‰©æ•£ä¸­å®ç° 100% çš„ä¸€è‡´æ€§æ˜¯ä¸æ­£ç¡®çš„ï¼Œä½†é€šè¿‡ä»ä¸€ä¸ªå¥½çš„æ¨¡å‹å¼€å§‹ï¼Œç»™ä½ çš„è§’è‰²å‘½åï¼Œä½¿ç”¨éšæœºåç§°ç”Ÿæˆå™¨ï¼Œå¹¶ä¿æŒä¸€è‡´çš„ç§æ—ï¼Œä½ å¯ä»¥è¾¾åˆ° 80-90% çš„ä¸€è‡´æ€§ã€‚
> - ğŸ“ 01:05 æ¼”è®²è€…è§£é‡Šäº†å¦‚ä½•é€šè¿‡ä»æç¤ºå¼€å§‹å¹¶å°è¯•ä¸åŒçš„å¤–è§‚ï¼Œç„¶åå°†æ‰€é€‰å›¾åƒå¯¼å…¥æ§åˆ¶é’ˆç»‡æ¥åœ¨ç¨³å®šæ‰©æ•£ä¸­åˆ›å»ºä¸€è‡´çš„è§’è‰²ã€‚
> - ğŸ’¡ 02:05 ä½¿ç”¨å…¨èº«ç…§ç‰‡æˆ–è‡³å°‘ä»è†ç›–ä»¥ä¸Šæ‹æ‘„ï¼Œæ ¹æ®éœ€è¦å¯ç”¨ Pixel Perfectï¼Œç„¶åé€‰æ‹©æ§åˆ¶æƒé‡ä¸º 1 çš„å‚è€ƒæ¨¡å‹ã€‚
> - ğŸ‘• 02:30 æ¼”è®²è€…è®¨è®ºäº†è§’è‰²è®¾è®¡ä¸­ä¸€è‡´æ€§çš„é‡è¦æ€§ï¼Œå¹¶å±•ç¤ºäº†å…·æœ‰ä¸€è‡´é¢éƒ¨ç‰¹å¾å’Œæœè£…çš„ç”Ÿæˆå›¾åƒçš„ç¤ºä¾‹ã€‚
> - ğŸ‘• 03:15 æœè£…ä¿æŒä¸€è‡´ä¸”å¯äº’æ¢ï¼Œå¯ä»¥è½»æ¾æ›´æ”¹èƒŒæ™¯ã€åœ°ç‚¹å’Œæœè£…ã€‚
> - ğŸ“· 04:23 äººå·¥æ™ºèƒ½ç”Ÿæˆçš„å›¾åƒå¯ç”¨äºçœŸå®ç…§ç‰‡ï¼Œå…è®¸ç”¨æˆ·æ”¹å˜æ‹æ‘„ç¯å¢ƒæˆ–ç”Ÿæˆç±»ä¼¼äºç‰¹å®šäººç‰©çš„å›¾åƒã€‚
> - ğŸ˜… 05:26  é™¤äº†æ¯›è¡£çš„é¢œè‰²å’Œç‰›ä»”è£¤ä¸Šçš„çº½æ‰£ç­‰å°ç»†èŠ‚å¤–ï¼Œè§’è‰²çš„å¤–è§‚åŸºæœ¬ä¸€è‡´ã€‚
> - ğŸ“· 06:04  å¢åŠ é£æ ¼ä¿çœŸåº¦æ»‘å—ä»¥æé«˜åˆ›å»ºè§’è‰²å›¾åƒçš„ä¸€è‡´æ€§ï¼Œåˆ©ç”¨å‚è€ƒæ§åˆ¶åˆ›å»ºä¸åŒçš„å§¿åŠ¿å’Œç¯å¢ƒï¼Œå¹¶åœ¨æœªæ¥çš„è§†é¢‘ä¸­å°†æ•…äº‹ä¸å…¶ä»–è§’è‰²æ‹¼å‡‘åœ¨ä¸€èµ·ã€‚

Model: realisticVisonV51_v51VAE

Sampling method: Euler a

é¦–å…ˆä½¿ç”¨è™šæ‹Ÿäººåï¼Œè¿™é‡Œé‡‡ç”¨äº†ä¸¤ä¸ª alisa tisson katey dobrevï¼Œè€Œä¸”åŠ å…¥äº†å¹´é¾„ä¿¡æ¯ 40yr oldï¼Œç”Ÿæˆäº†ä¸€æ‰¹çœ‹èµ·æ¥é«˜åº¦è¿‘ä¼¼çš„äººè„¸ç…§ç‰‡

```
Prompt: analog style , half body portrait , 40yr old alisa tisson katey dobrev , filipino , smiling , fashionable black sweater , jeans , black hair blonde highlights model poses , city at night , shallow depth of field , dslr , soft lighting , high quality , film grain , hasselblad , helios 44-2 58mm f2
Negative Prompt: ( deformed iris , deformed pupils , semi-realistic , cgi , 3d , render , sketch , cartoon , drawing , anime , mutated hands and fingers : 1.4 ) , ( deformed , distorted , disfigured : 1.3 ) , poorly drawn , bad anatomy , wrong anatomy , extra limb , missing limb , floating limbs , disconnected limbs , mutation , mutated , ugly , disgusting , amputation
```

<img src="./images/image-20230912101901093.png" alt="image-20230912101901093" style="zoom:50%;" />

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ Promptï¼Œå°† â€œcity at nightâ€ æ”¹ä¸º â€œpier at sunsetâ€(æ—¥è½çš„ç å¤´)ï¼Œå¹¶å°†ä¸Šè¿°ç”Ÿæˆçš„å›¾ç‰‡ï¼Œæ¯”å¦‚ç¬¬äºŒå¼ ä½œä¸ºå‚è€ƒå›¾ã€‚

é€‰æ‹© ControlNetï¼Œå‹¾é€‰â€œEnableâ€ï¼Œä¹Ÿå¯ä»¥å‹¾é€‰â€œPixel Perfectâ€ï¼ŒControl Typeï¼Œé€‰æ‹©â€œReferenceâ€ï¼Œé¢„å¤„ç†å™¨é€‰æ‹©â€œreference_onlyâ€ï¼Œæ§åˆ¶æƒé‡ï¼ˆControl Weightï¼‰ é€šå¸¸åœ¨ 0.7~1ï¼Œé£æ ¼ä¿çœŸåº¦ï¼ˆStyle Fidelityï¼‰0.5 å¯ä»¥ä¿æŒè¾ƒé«˜çš„ä¸€è‡´æ€§ï¼Œ

<img src="./images/image-20230912102936424.png" alt="image-20230912102936424" style="zoom:50%;" />

å¯ä»¥çœ‹åˆ°äººç‰©åŸºæœ¬ä¿æŒä¸€è‡´ï¼Œæœè£…æ•´ä½“æ•ˆæœä¹Ÿæœ‰è¾ƒå¥½çš„è¿ç§»ï¼Œä½†æœè£…ç»†èŠ‚æ— æ³• 100% ä¿è¯ï¼Œæ¯”å¦‚é¢†å£ã€è£¤å­æ‹‰é“¾çº½æ‰£ç­‰ï¼Œå¯¹äºå¤æ‚æœè£…ï¼Œå¯èƒ½æ›´å·®ã€‚



---------------

